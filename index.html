<!doctype html>
<html lang='ja'>
<head>
<meta charset='UTF-8'>
<title>打鍵効率の目安</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--
  Copyright 2015 Esrille Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<style>
body {
  margin: 0px 30px;
  font-family: sans-serif;
}
h1 {
  font-size: 1.6em;
  font-weight: normal;
}
table {
  margin: 1.5em;
  border-collapse: collapse;
}
th, td {
  border: 1px solid silver;
  padding: 0.2em 1em;
}
th {
  font-family: sans-serif;
  font-weight: normal;
}
hr {
  margin: 2em;
}
footer {
  margin-top: 2em;
  text-align: right;
  color: gray;
  font-size: smaller;
}
.note {
  font-size: smaller;
}
</style>
</head>
<body>
<h1>打鍵効率の目安</h1>
<table id='result'>
<tr>
<th>配列</th>
<th>打鍵数</th>
<th>打鍵効率<span class='note'>(1)</span></th>
<th>交互打鍵率</th>
<th>連続シフト数<span class='note'>(2)</span></th>
<th>同時打鍵を1打とした場合の打鍵効率</th>
</tr>
</table>
<span class='note'>
(1) 文章を入力するのに要したキーボードの打鍵数を、ひらがなに戻して数えた文章の文字数で割った数値。<br>
(2) 同じシフト面の文字が続いて、シフトキーを押したままにできた文字数。
</span>
<p>
<button onclick="retry()">再評価</button>

<hr>

別の文章で評価したいときは、下のテキスト ボックスにひらがなで文章を貼り付けて、[再評価]ボタンを押します。
<p>
<textarea id='text' cols='80' rows='10' style='overflow: scroll'>
この　てきすと ぼっくすないの　ひらがなで　きじゅつされた　ぶんしょうについて、　きーぼーどの　かなはいれつの　だけんこうりつを　かいせきします。
あるていど ながさの　ある ぶんしょうで　かいせきすると、　より　じつようじょうの　あたいに　ちかい　けっかが　もとめられます。
</textarea>

<hr>

<b>ご注意:</b>
<p>
打鍵効率は、かな配列を選ぶ際の目安のひとつです。<b>配列の絶対的な優劣を示す数値ではない</b>という点についてはご注意ください。
<ul>
<li>Stickney Next (JISかな配列相当)は、打鍵効率には優れていますが、キーボードの4段すべてを利用するので、タッチタイプの習得には多少の練習が必要になります。
<li>親指シフトは、キーボードの2段分だけで約90%の日本語が打てるようになっているため、タッチタイプの習得がしやすい配列になっています。
<li>M式のように単純な打鍵効率ではなく、交互打鍵率を重視した設計もあります。左右のキーをほぼ同時に押せるレベルまで練習すると、実質的な打鍵効率はやはり非常に優れたものになります。
<li>キーボードの3段をバランスよく使うように設計されている配列の場合、打鍵効率は1.2~1.3台になり、4段を使用するJISかな配列と比較しても打鍵効率はほとんど低下していません。
<li>バグ等ありましたら、<a href='https://github.com/esrille/keyboard-layout-comparison'>GitHubリポジトリ</a>のIssuesからご連絡ください。
<ul>

<footer>
Copyright 2015 <a href='http://www.esrille.com/'>Esrille Inc.</a>
</footer>

<script>
var layouts = [
    [   "Stickney Next", [
        ["あ", "3"],     ["い", "e"],     ["う", "4"],     ["え", "5"],     ["お", "6"],
        ["か", "t"],     ["き", "g"],     ["く", "h"],     ["け", "Sg|"],   ["こ", "b"],
        ["さ", "x"],     ["し", "d"],     ["す", "r"],     ["せ", "Sd|"],   ["そ", "Sr|"],
        ["た", "q"],     ["ち", "a"],     ["つ", "z"],     ["て", "w"],     ["と", "s"],
        ["な", "u"],     ["に", "i"],     ["ぬ", "Sk|"],   ["ね", ","],     ["の", "k"],
        ["は", "f"],     ["ひ", "v"],     ["ふ", "2"],     ["へ", "Sf|"],   ["ほ", "1"],
        ["ま", "j"],     ["み", "n"],     ["む", "Sm|"],   ["め", "Sj|"],   ["も", "m"],
        ["や", "7"],     ["ゆ", "8"],     ["よ", "9"],
        ["ら", "o"],     ["り", "l"],     ["る", "."],     ["れ", ";"],     ["ろ", "Sl|"],
        ["わ", "0"],     ["を", "c"],     ["ん", "y"],
        ["が", "tp"],    ["ぎ", "gp"],    ["ぐ", "hp"],    ["げ", "Sgp"],   ["ご", "bp"],
        ["ざ", "xp"],    ["じ", "dp"],    ["ず", "rp"],    ["ぜ", "Sdp"],   ["ぞ", "Srp"],
        ["だ", "qp"],    ["ぢ", "ap"],    ["づ", "zp"],    ["で", "wp"],    ["ど", "Sp"],
        ["ば", "fp"],    ["び", "vp"],    ["ぶ", "2p"],    ["べ", "Sfp"],   ["ぼ", "1p"],
        ["ぱ", "fSp|"],  ["ぴ", "vSp|"],  ["ぷ", "2Sp|"],  ["ぺ", "SfSp|"], ["ぽ", "1Sp|"],
        ["ぁ", "S3|"],   ["ぃ", "Se|"],   ["ぅ", "S4|"],   ["ぇ", "S5|"],   ["ぉ", "S6|"],
        ["ゃ", "7"],     ["ゅ", "S8|"],   ["ょ", "S9|"],
        ["っ", "Sz|"],
        ["「", "["],     ["」", "]"],
        ["、", "'"],     ["。", "-"],     ["ー", "S/|"]
      ]
    ],
    [   "ローマ字入力", [
        ["きゃ", "kya"],  ["きゅ", "kyu"],  ["きょ", "kyo"],
        ["しゃ", "sya"],  ["しゅ", "syu"],  ["しょ", "syo"],
        ["ちゃ", "tya"],  ["ちゅ", "tyu"],  ["ちょ", "tyo"],
        ["なゃ", "nya"],  ["にゅ", "nyu"],  ["にょ", "nyo"],
        ["ひゃ", "hya"],  ["ひゅ", "hyu"],  ["ひょ", "hyo"],
        ["みゃ", "mya"],  ["みゅ", "myu"],  ["みょ", "myo"],
        ["りゃ", "rya"],  ["りゅ", "ryu"],  ["りょ", "ryo"],
        ["ぎゃ", "gya"],  ["ぎゅ", "gyu"],  ["ぎょ", "gyo"],
        ["じゃ", "ja"],   ["じゅ", "ju"],   ["じょ", "jo"],
        ["ぢゃ", "dya"],  ["ぢゅ", "dyu"],  ["ぢょ", "dyo"],
        ["びゃ", "bya"],  ["びゅ", "byu"],  ["びょ", "byo"],
        ["ぴゃ", "pya"],  ["ぴゅ", "pyu"],  ["ぴょ", "pyo"],
        ["か", "ka"],    ["き", "ki"],   ["く", "ku"],   ["け", "ke"],   ["こ", "ko"],
        ["さ", "sa"],    ["し", "si"],   ["す", "su"],   ["せ", "se"],   ["そ", "so"],
        ["た", "ta"],    ["ち", "ti"],   ["つ", "tu"],   ["て", "te"],   ["と", "to"],
        ["な", "na"],    ["に", "ni"],   ["ぬ", "nu"],   ["ね", "ne"],   ["の", "no"],
        ["は", "ha"],    ["ひ", "hi"],   ["ふ", "hu"],   ["へ", "he"],   ["ほ", "ho"],
        ["ま", "ma"],    ["み", "mi"],   ["む", "mu"],   ["め", "me"],   ["も", "mo"],
        ["や", "ya"],    ["ゆ", "yu"],   ["よ", "yo"],
        ["ら", "ra"],    ["り", "ri"],   ["る", "ru"],   ["れ", "re"],   ["ろ", "ro"],
        ["わ", "wa"],    ["を", "wo"],
        ["ん", "nn"],  // !
        ["が", "ga"],    ["ぎ", "gi"],   ["ぐ", "gu"],   ["げ", "ge"],   ["ご", "go"],
        ["ざ", "za"],    ["じ", "zi"],   ["ず", "zu"],   ["ぜ", "ze"],   ["ぞ", "zo"],
        ["だ", "da"],    ["ぢ", "di"],   ["づ", "du"],   ["で", "de"],   ["ど", "do"],
        ["ば", "ba"],    ["び", "bi"],   ["ぶ", "bu"],   ["べ", "be"],   ["ぼ", "bo"],
        ["ぱ", "pa"],    ["ぴ", "pi"],   ["ぷ", "pu"],   ["ぺ", "pe"],   ["ぽ", "po"],
        ["あ", "a"],     ["い", "i"],    ["う", "u"],    ["え", "e"],    ["お", "o"],
        ["ぁ", "xa"],    ["ぃ", "xi"],   ["ぅ", "xu"],   ["ぇ", "xe"],   ["ぉ", "xo"],
        ["ゃ", "xya"],   ["ゅ", "xyu"],  ["ょ", "xyo"],
        ["っ", "t"],    // !
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "り."],     ["ー", "-"]
      ]
    ],
    [   "Nicola (親指シフト)", [
        ["あ", "Rs"],    ["い", "l"],     ["う", "a"],     ["え", "Lw"],    ["お", "Rj"],
        ["か", "w"],     ["き", "k"],     ["く", "i"],     ["け", "f"],     ["こ", "r"],
        ["さ", "t"],     ["し", "s"],     ["す", "c"],     ["せ", "g"],     ["そ", "m"],
        ["た", "e"],     ["ち", "u"],     ["つ", "o"],     ["て", "d"],     ["と", "j"],
        ["な", "Ld"],    ["に", "Ru"],    ["ぬ", "Rn"],    ["ね", ","],     ["の", "Rk"],
        ["は", "h"],     ["ひ", "x"],     ["ふ", "v"],     ["へ", "b"],     ["ほ", "."],
        ["ま", "Ro"],    ["み", "Rh"],    ["む", "R,"],    ["め", "n"],     ["も", "Lg"],
        ["や", "Lv"],    ["ゆ", "Rm"],    ["よ", "Ry"],
        ["ら", "y"],     ["り", "Le"],    ["る", "Ri"],    ["れ", "Lt"],    ["ろ", "Lc"],
        ["わ", "R."],    ["を", "La"],    ["ん", ";"],
        ["が", "Rw"],    ["ぎ", "Lk"],    ["ぐ", "Li"],    ["げ", "Rf"],    ["ご", "Rr"],
        ["ざ", "Rt"],    ["じ", "Rs"],    ["ず", "Rc"],    ["ぜ", "Rg"],    ["ぞ", "Lm"],
        ["だ", "Re"],    ["ぢ", "Lu"],    ["づ", "Lo"],    ["で", "Rd"],    ["ど", "Lj"],
        ["ば", "Lh"],    ["び", "Rx"],    ["ぶ", "Rv"],    ["べ", "Rb"],    ["ぼ", "L."],
        ["ぱ", "Ly"],    ["ぴ", "Lp"],    ["ぷ", "Ln"],    ["ぺ", "L,"],    ["ぽ", "Ll"],
        ["ぁ", "Lq"],    ["ぃ", "Lb"],    ["ぅ", "Lz"],    ["ぇ", "Rp"],    ["ぉ", "R/"],
        ["ゃ", "Rr"],    ["ゅ", "Rf"],    ["ょ", "Ll"],
        ["っ", "R;"],
        ["「", "R4"],    ["」", "R5"],
        ["、", "p"],     ["。", "z"],     ["ー", "Lx"]
      ]
    ],
    [   "M式 (標準モード)", [
        ["きゃ", "Shあ"], ["きゅ", "Shう"], ["きょ", "Shお"],
        ["しゃ", "Sjあ"], ["しゅ", "Sjう"], ["しょ", "Sjお"],
        ["ちゃ", "Skあ"], ["ちゅ", "Skう"], ["ちょ", "Skお"],
        ["なゃ", "Slあ"], ["にゅ", "Slう"], ["にょ", "Slお"],
        ["ひゃ", "S;あ"], ["ひゅ", "S;う"], ["ひょ", "S;お"],
        ["みゃ", "Syあ"], ["みゅ", "Syう"], ["みょ", "Syお"],
        ["りゃ", "Siあ"], ["りゅ", "Siう"], ["りょ", "Siお"],
        ["ぎゃ", "Snあ"], ["ぎゅ", "Snう"], ["ぎょ", "Snお"],
        ["じゃ", "Smあ"], ["じゅ", "Smう"], ["じょ", "Smお"],
        ["ぢゃ", "S,あ"], ["ぢゅ", "S,う"], ["ぢょ", "S,お"],
        ["びゃ", "S/あ"], ["びゅ", "S/う"], ["びょ", "S/お"],
        ["ぴゃ", "Spあ"], ["ぴゅ", "Spう"], ["ぴょ", "Spお"],
        ["か", "hあ"],    ["き", "hい"],   ["く", "hう"],   ["け", "hえ"],   ["こ", "hお"],
        ["さ", "jあ"],    ["し", "jい"],   ["す", "jう"],   ["せ", "jえ"],   ["そ", "jお"],
        ["た", "kあ"],    ["ち", "kい"],   ["つ", "kう"],   ["て", "kえ"],   ["と", "kお"],
        ["な", "lあ"],    ["に", "lい"],   ["ぬ", "lう"],   ["ね", "lえ"],   ["の", "lお"],
        ["は", ";あ"],    ["ひ", ";い"],   ["ふ", ";う"],   ["へ", ";え"],   ["ほ", ";お"],
        ["ま", "yあ"],    ["み", "yい"],   ["む", "yう"],   ["め", "yえ"],   ["も", "yお"],
        ["や", "uあ"],    ["ゆ", "uう"],   ["よ", "uお"],
        ["ら", "iあ"],    ["り", "iい"],   ["る", "iう"],   ["れ", "iえ"],   ["ろ", "iお"],
        ["わ", "oあ"],    ["を", "oお"],
        ["が", "nあ"],    ["ぎ", "nい"],   ["ぐ", "nう"],   ["げ", "nえ"],   ["ご", "nお"],
        ["ざ", "mあ"],    ["じ", "mい"],   ["ず", "mう"],   ["ぜ", "mえ"],   ["ぞ", "mお"],
        ["だ", ",あ"],    ["ぢ", ",い"],   ["づ", ",う"],   ["で", ",え"],   ["ど", ",お"],
        ["ば", "/あ"],    ["び", "/い"],   ["ぶ", "/う"],   ["べ", "/え"],   ["ぼ", "/お"],
        ["ぱ", "pあ"],    ["ぴ", "pい"],   ["ぷ", "pう"],   ["ぺ", "pえ"],   ["ぽ", "pお"],
        ["あい", "v"],    ["おう", "b"],   ["えい", "z"],
        ["あhう", "Sr"],   ["いhう", "Se"],   ["うhう", "Sw"],  ["えhい", "Sq"],  ["おhう", "St"],
        ["あん", "Sf"],   ["いん", "Sd"],   ["うん", "Ss"],  ["えん", "Sa"],  ["おん", "Sg"],
        ["あkう", "Sf"],   ["いkう", "Sd"],   ["うkう", "Ss"],  ["えkう", "Sa"],  ["おkう", "Sg"],
        ["ん", "So"],
        ["あ", "f"],     ["い", "d"],     ["う", "s"],     ["え", "a"],     ["お", "g"],
        ["ぁ", "xf"],    ["ぃ", "xd"],    ["ぅ", "xs"],    ["ぇ", "xa"],    ["ぉ", "xg"],
        ["ゃ", "xuf"],   ["ゅ", "xus"],   ["ょ", "xug"],
        ["っ", "Su"],
        ["「", "["],     ["」", "]"],
        ["、", "."],     ["。", "S."],     ["ー", "-"]
      ]
    ],
    [ "新JIS配列 (X 6004)", [
        ["あ", "b"],     ["い", "k"],     ["う", "j"],     ["え", "Su|"],   ["お", "Sj|"],
        ["か", "s"],     ["き", ";"],     ["く", "h"],     ["け", "w"],     ["こ", "x"],
        ["さ", "v"],     ["し", "d"],     ["す", "z"],     ["せ", "e"],     ["そ", "q"],
        ["た", "f"],     ["ち", "-"],     ["つ", "y"],     ["て", "r"],     ["と", "f"],
        ["な", "'"],     ["に", "c"],     ["ぬ", "Sp|"],   ["ね", "Sv|"],   ["の", "i"],
        ["は", "a"],     ["ひ", "Sy|"],   ["ふ", "Sr|"],   ["へ", "Ss|"],   ["ほ", "Se|"],
        ["ま", "Sh|"],   ["み", "Si|"],   ["む", "Sn|"],   ["め", "St|"],   ["も", "Sk|"],
        ["や", "So|"],   ["ゆ", "S;|"],   ["よ", "Sg|"],
        ["ら", "Sd|"],   ["り", "p"],     ["る", "m"],     ["れ", "/"],     ["ろ", "Sm|"],
        ["わ", "Sl|"],   ["を", "o"],     ["ん", "u"],
        ["が", "sl"],    ["ぎ", ";l"],    ["ぐ", "hl"],    ["げ", "wl"],    ["ご", "xl"],
        ["ざ", "vl"],    ["じ", "dl"],    ["ず", "zl"],    ["ぜ", "el"],    ["ぞ", "ql"],
        ["だ", "fl"],    ["ぢ", "-l"],    ["づ", "yl"],    ["で", "rl"],    ["ど", "fl"],
        ["ば", "al"],    ["び", "Syl"],   ["ぶ", "Srl"],   ["べ", "Ssl"],   ["ぼ", "Sel"],
        ["ぱ", "aSw|"],  ["ぴ", "SySw|"], ["ぷ", "SrSw|"], ["ぺ", "SsSw|"], ["ぽ", "SeSw|"],
        ["ぁ", "Sq|"],   ["ぃ", "Sa|"],   ["ぅ", "Sz|"],   ["ぇ", "Sx|"],   ["ぉ", "Sc|"],
        ["ゃ", "Sb|"],   ["ゅ", "Sf|"],   ["ょ", "t"],
        ["っ", "n"],
        ["「", "S-|"],   ["」", "S'|"],
        ["、", ","],     ["。", "."],     ["ー", "S.|"]
      ]
    ],
    [   "TRON", [
        ["あ", "o"],     ["い", "j"],     ["う", "k"],     ["え", "Ry:"],   ["お", "Rh:"],
        ["か", "d"],     ["き", "y"],     ["く", "i"],     ["け", "Ru:"],   ["こ", "e"],
        ["さ", "v"],     ["し", "l"],     ["す", "n"],     ["せ", "Lc|"],   ["そ", "Lw|"],
        ["た", "a"],     ["ち", "Rj:"],   ["つ", "m"],     ["て", "f"],     ["と", "s"],
        ["な", "b"],     ["に", "c"],     ["ぬ", "La|"],   ["ね", "Ls|"],   ["の", "u"],
        ["は", "r"],     ["ひ", "Lq|"],   ["ふ", "Lg|"],   ["へ", "Lb|"],   ["ほ", "Lt|"],
        ["ま", "z"],     ["み", "Rl:"],   ["む", "Ro:"],   ["め", "Ri:"],   ["も", "g"],
        ["や", "R;:"],   ["ゆ", "Lv|"],   ["よ", "Lf|"],
        ["ら", "q"],     ["り", "x"],     ["る", "w"],     ["れ", "p"],     ["ろ", "Rp:"],
        ["わ", "Rn:"],   ["を", "h"],     ["ん", ";"],
        ["が", "Rd:"],   ["ぎ", "Ly|"],   ["ぐ", "Li|"],   ["げ", "Lu|"],   ["ご", "Le|"],
        ["ざ", "Rv:"],   ["じ", "Ll|"],   ["ず", "Ln|"],   ["ぜ", "Rc:"],   ["ぞ", "Rw:"],
        ["だ", "Ra:"],   ["ぢ", "Lj|"],   ["づ", "Lm|"],   ["で", "Rf:"],   ["ど", "Rs:"],
        ["ば", "Rr:"],   ["び", "Rq:"],   ["ぶ", "Rg:"],   ["べ", "Rb:"],   ["ぼ", "Rt:"],
        ["ぱ", "rR.:"],  ["ぴ", "LqR.:"], ["ぷ", "LgR.:"], ["ぺ", "LbR.:"], ["ぽ", "LtR.:"],
        ["ぁ", "R,:"],   ["ぃ", "Rm:"],   ["ぅ", "R/:"],   ["ぇ", "Lz|"],   ["ぉ", "Lx|"],
        ["ゃ", "Lr|"],   ["ゅ", "Ld|"],   ["ょ", "t"],
        ["っ", "/"],
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "."],     ["ー", "Rk:"]
      ]
    ],
]

function evalLayout(element, index, array) {
    var text = document.getElementById('text').value.replace(/\s/g, '')

    var strokes = text
    element[1].forEach(function(element, index, array) {
        strokes = strokes.replace(new RegExp(element[0], 'g'), element[1])
    })
    strokes = strokes.replace(/:R/g, 'X')
    strokes = strokes.replace(/\|L/g, 'X')
    strokes = strokes.replace(/\|S/g, 'X')
    var m;
    m = strokes.match(/X/g)
    var contCount = m ? m.length : 0
    strokes = strokes.replace(/[:\|X]/g, '')

    var lr = strokes.replace(/[SLR]/g, '')
    lr = lr.replace(/[12345qwertasdfgzxcvb]/g, 'L')
    lr = lr.replace(/[67890yuiop\-=hjkl;'\\nm,\.\/]/g, 'R')
    m = lr.match(/LR/g)
    var lrCount = m ? m.length : 0
    m = lr.match(/RL/g)
    var rlCount = m ? m.length : 0;
    var inner = '<td>' + element[0] + '</td>'
    inner += '<td>' + strokes.length + '</td>'
    inner += '<td>' + ((Math.round(strokes.length / text.length * 100)) / 100) + '</td>'
    inner += '<td>' + (Math.round((lrCount + rlCount) / lr.length * 1000) / 10) + '%</td>'
    inner += '<td>' + contCount + '</td>'
    inner += '<td>' + ((Math.round(lr.length / text.length * 100)) / 100) + '</td>'

    var row = document.createElement("tr")
    row.innerHTML = inner
    document.getElementById('result').appendChild(row);
}

function retry() {
    var table = document.getElementById('result');
    while (2 <= table.rows.length) {
        var row = table.rows[table.rows.length - 1]
        row.parentNode.removeChild(row)
    }
    layouts.forEach(evalLayout)
}

layouts.forEach(evalLayout)
</script>
</body>
</html>
