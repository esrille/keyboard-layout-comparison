<!doctype html>
<html lang='ja'>
<head>
<meta charset='UTF-8'>
<title>打鍵効率の目安</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--
  Copyright 2015-2017 Esrille Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<style>
body {
  margin: 0px 30px;
  font-family: sans-serif;
}
h1 {
  font-size: 1.6em;
  font-weight: normal;
}
table {
  margin: 1.5em;
  border-collapse: collapse;
}
th, td {
  border: 1px solid silver;
  padding: 0.2em 1em;
}
th {
  font-family: sans-serif;
  font-weight: normal;
}
hr {
  margin: 2em;
}
footer {
  margin-top: 2em;
  text-align: right;
  color: gray;
  font-size: smaller;
}
.note {
  font-size: smaller;
}
</style>
</head>
<body>
<h1>打鍵効率の目安</h1>
<table id='result'>
<tr>
<th>配列</th>
<th>打鍵数</th>
<th>打鍵効率<span class='note'>(1)</span></th>
<th>交互打鍵数</th>
<th>連続シフト数<span class='note'>(2)</span></th>
<th>同指異鍵</th>
<th>同手同段異指<span class='note'>(3)</span></th>
</tr>
</table>
<span class='note'>
(1) 文章を入力するのに要したキーボードの打鍵数を、ひらがなに戻して数えた文章の文字数で割った数値。<br>
(2) 同じシフト面の文字が続いて、シフトキーを押したままにできた文字数。<br>
(3) T,G,B,Y,H,Nキーは除外。<br>
</span>
<p>
<button onclick="retry()">再評価</button>

<hr>

別の文章で評価したいときは、下のテキスト ボックスにひらがなで文章を貼り付けて、[再評価]ボタンを押します。
<p>
<textarea id='text' cols='80' rows='10' style='overflow: scroll'>
この　てきすと ぼっくすないの　ひらがなで　きじゅつされた　ぶんしょうについて、　きーぼーどの　かなはいれつの　だけんこうりつを　かいせきします。
あるていど ながさの　ある ぶんしょうで　かいせきすると、　より　じつようじょうの　あたいに　ちかい　けっかが　もとめられます。
</textarea>

<hr>

<b>ご注意:</b>
<p>
打鍵効率は、かな配列を選ぶ際の目安のひとつです。<b>配列の絶対的な優劣を示す数値ではない</b>という点についてはご注意ください。
<ul>
<li>打鍵効率は、<a href='http://www.esrille.com/keyboard/ja-jp/layouts.ja-jp.html'>エスリル ニューキーボード NISSE</a>で採用しているレイアウトに基づいて計算しています。<br>
<span class='note'>※ 月配列(2-263), New Stickneyは、NISSEのファームウェアではサポートしていません。</span>
<li>Stickney Next (JISかな配列相当)は、打鍵効率には優れていますが、キーボードの4段すべてを利用するので、タッチタイプの習得には多少の練習が必要になります。
<li>親指シフトは、キーボードの2段分だけで約90%の日本語が打てるようになっているため、タッチタイプの習得がしやすい配列になっています。
<li>M式のように単純な打鍵効率ではなく、交互打鍵率を重視した設計もあります。左右のキーをほぼ同時に押せるレベルまで練習すると、実質的な打鍵効率はやはり非常に優れたものになります。
<li>キーボードの3段をバランスよく使うように設計されている配列の場合、打鍵効率は1.2~1.3台になり、4段を使用するJISかな配列と比較しても打鍵効率はほとんど低下していません。
<li>バグ等ありましたら、<a href='https://github.com/esrille/keyboard-layout-comparison'>GitHubリポジトリ</a>のIssuesからご連絡ください。
<ul>

<footer>
Copyright 2015, 2016 <a href='http://www.esrille.com/'>Esrille Inc.</a>
</footer>

<script>
var layouts = [
    [   "Stickney Next", [
        ["あ", "3"],     ["い", "e"],     ["う", "4"],     ["え", "5"],     ["お", "6"],
        ["か", "t"],     ["き", "g"],     ["く", "h"],     ["け", "Sg|"],   ["こ", "b"],
        ["さ", "x"],     ["し", "d"],     ["す", "r"],     ["せ", "Sd|"],   ["そ", "Sr|"],
        ["た", "q"],     ["ち", "a"],     ["つ", "z"],     ["て", "w"],     ["と", "s"],
        ["な", "u"],     ["に", "i"],     ["ぬ", "Sk|"],   ["ね", ","],     ["の", "k"],
        ["は", "f"],     ["ひ", "v"],     ["ふ", "2"],     ["へ", "Sf|"],   ["ほ", "1"],
        ["ま", "j"],     ["み", "n"],     ["む", "Sm|"],   ["め", "Sj|"],   ["も", "m"],
        ["や", "7"],     ["ゆ", "8"],     ["よ", "9"],
        ["ら", "o"],     ["り", "l"],     ["る", "."],     ["れ", ";"],     ["ろ", "Sl|"],
        ["わ", "0"],     ["を", "c"],     ["ん", "y"],
        ["ゔ", "4p"],
        ["が", "tp"],    ["ぎ", "gp"],    ["ぐ", "hp"],    ["げ", "Sgp"],   ["ご", "bp"],
        ["ざ", "xp"],    ["じ", "dp"],    ["ず", "rp"],    ["ぜ", "Sdp"],   ["ぞ", "Srp"],
        ["だ", "qp"],    ["ぢ", "ap"],    ["づ", "zp"],    ["で", "wp"],    ["ど", "Sp"],
        ["ば", "fp"],    ["び", "vp"],    ["ぶ", "2p"],    ["べ", "Sfp"],   ["ぼ", "1p"],
        ["ぱ", "fSp|"],  ["ぴ", "vSp|"],  ["ぷ", "2Sp|"],  ["ぺ", "SfSp|"], ["ぽ", "1Sp|"],
        ["ぁ", "S3|"],   ["ぃ", "Se|"],   ["ぅ", "S4|"],   ["ぇ", "S5|"],   ["ぉ", "S6|"],
        ["ゃ", "7"],     ["ゅ", "S8|"],   ["ょ", "S9|"],
        ["っ", "Sz|"],
        ["「", "["],     ["」", "]"],
        ["、", "'"],     ["。", "-"],     ["ー", "S/|"]
      ]
    ],
    [   "ローマ字入力", [
        ["んあ", "nnあ"], ["んい", "nnい"], ["んう", "nnう"], ["んえ", "nnえ"], ["んお", "nnお"],
        ["んな", "nnな"], ["んに", "nnに"], ["んぬ", "nnぬ"], ["んね", "nnね"], ["んの", "nnの"],
        ["うぁ", "wha"],  ["うぃ", "wi"],                     ["うぇ", "we"],   ["うぉ", "who"],
        ["きゃ", "kya"],  ["きぃ", "kyi"],  ["きゅ", "kyu"],  ["きぇ", "kye"],  ["きょ", "kyo"],
        ["くぁ", "qa"],   ["くぃ", "qi"],   ["くぅ", "qwu"],  ["くぇ", "qe"],   ["くぉ", "qo"],
        ["しゃ", "sya"],  ["しぃ", "syi"],  ["しゅ", "syu"],  ["しぇ", "sye"],  ["しょ", "syo"],
        ["すぁ", "swa"],  ["すぃ", "swi"],  ["すぅ", "swu"],  ["すぇ", "swe"],  ["すぉ", "swo"],
        ["ちゃ", "tya"],  ["ちぃ", "tyi"],  ["ちゅ", "tyu"],  ["ちぇ", "tye"],  ["ちょ", "tyo"],
        ["つぁ", "tsa"],  ["つぃ", "tsi"],                    ["つぇ", "tse"],  ["つぉ", "tso"],
        ["てゃ", "tha"],  ["てぃ", "thi"],  ["てゅ", "thu"],  ["てぇ", "the"],  ["てょ", "tho"],
        ["とぁ", "twa"],  ["とぃ", "twi"],  ["とぅ", "twu"],  ["とぇ", "twe"],  ["とぉ", "two"],
        ["にゃ", "nya"],  ["にぃ", "nyi"],  ["にゅ", "nyu"],  ["にぇ", "nye"],  ["にょ", "nyo"],
        ["ひゃ", "hya"],  ["ひぃ", "hyi"],  ["ひゅ", "hyu"],  ["ひぇ", "hye"],  ["ひょ", "hyo"],
        ["ふぁ", "fa"],   ["ふぃ", "fi"],   ["ふぅ", "fwu"],  ["ふぇ", "fe"],   ["ふぉ", "fo"],
        ["ふゃ", "fya"],                    ["ふゅ", "fyu"],                    ["ふょ", "fyo"],
        ["みゃ", "mya"],  ["みぃ", "myi"],  ["みゅ", "myu"],  ["みぇ", "mye"],  ["みょ", "myo"],
        ["りゃ", "rya"],  ["りぃ", "ryi"],  ["りゅ", "ryu"],  ["りぇ", "rye"],  ["りょ", "ryo"],
        ["ぎゃ", "gya"],  ["ぎぃ", "gyi"],  ["ぎゅ", "gyu"],  ["ぎぇ", "gye"],  ["ぎょ", "gyo"],
        ["ぐぁ", "gwa"],  ["ぐぃ", "gwi"],  ["ぐぅ", "gwu"],  ["ぐぇ", "gwe"],  ["ぐぉ", "qwo"],
        ["じゃ", "ja"],   ["じぃ", "jyi"],  ["じゅ", "ju"],   ["じぇ", "je"],   ["じょ", "jo"],
        ["ぢゃ", "dya"],  ["ぢぃ", "dyi"],  ["ぢゅ", "dyu"],  ["ぢぇ", "dye"],  ["ぢょ", "dyo"],
        ["でゃ", "dha"],  ["でぃ", "dhi"],  ["でゅ", "dhu"],  ["でぇ", "dhe"],  ["でょ", "dho"],
        ["どぁ", "dwa"],  ["どぃ", "dwi"],  ["どぅ", "dwu"],  ["どぇ", "dwe"],  ["どぉ", "dwo"],
        ["びゃ", "bya"],  ["びぃ", "byi"],  ["びゅ", "byu"],  ["びぇ", "bye"],  ["びょ", "byo"],
        ["ゔぁ", "va"],   ["ゔぃ", "vi"],   ["ゔ", "vu"],     ["ゔぇ", "ve"],   ["ゔぉ", "vo"],
        ["ゔゃ", "vya"],                    ["ゔゅ", "vyu"],                    ["ゔょ", "vyo"],
        ["ぴゃ", "pya"],  ["ぴぃ", "pyi"],  ["ぴゅ", "pyu"],  ["ぴぇ", "pye"],  ["ぴょ", "pyo"],
        ["か", "ka"],    ["き", "ki"],   ["く", "ku"],   ["け", "ke"],   ["こ", "ko"],
        ["さ", "sa"],    ["し", "si"],   ["す", "su"],   ["せ", "se"],   ["そ", "so"],
        ["た", "ta"],    ["ち", "ti"],   ["つ", "tu"],   ["て", "te"],   ["と", "to"],
        ["な", "na"],    ["に", "ni"],   ["ぬ", "nu"],   ["ね", "ne"],   ["の", "no"],
        ["は", "ha"],    ["ひ", "hi"],   ["ふ", "fu"],   ["へ", "he"],   ["ほ", "ho"],
        ["ま", "ma"],    ["み", "mi"],   ["む", "mu"],   ["め", "me"],   ["も", "mo"],
        ["や", "ya"],    ["ゆ", "yu"],   ["よ", "yo"],
        ["ら", "ra"],    ["り", "ri"],   ["る", "ru"],   ["れ", "re"],   ["ろ", "ro"],
        ["わ", "wa"],    ["を", "wo"],
        ["ん", "n"],
        ["が", "ga"],    ["ぎ", "gi"],   ["ぐ", "gu"],   ["げ", "ge"],   ["ご", "go"],
        ["ざ", "za"],    ["じ", "zi"],   ["ず", "zu"],   ["ぜ", "ze"],   ["ぞ", "zo"],
        ["だ", "da"],    ["ぢ", "di"],   ["づ", "du"],   ["で", "de"],   ["ど", "do"],
        ["ば", "ba"],    ["び", "bi"],   ["ぶ", "bu"],   ["べ", "be"],   ["ぼ", "bo"],
        ["ぱ", "pa"],    ["ぴ", "pi"],   ["ぷ", "pu"],   ["ぺ", "pe"],   ["ぽ", "po"],
        ["あ", "a"],     ["い", "i"],    ["う", "u"],    ["え", "e"],    ["お", "o"],
        ["ぁ", "xa"],    ["ぃ", "xi"],   ["ぅ", "xu"],   ["ぇ", "xe"],   ["ぉ", "xo"],
        ["ヵ", "xka"],   ["ヶ", "xke"],
        ["ゃ", "xya"],   ["ゅ", "xyu"],  ["ょ", "xyo"],
        ["っ", "t"],  // !
        ["ゎ", "xwa"],
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "."],    ["ー", "-"]
      ]
    ],
    [   "Nicola (親指シフト)", [
        ["あ", "Rs"],    ["い", "l"],     ["う", "a"],     ["え", "Lw"],    ["お", "Rj"],
        ["か", "w"],     ["き", "k"],     ["く", "i"],     ["け", "f"],     ["こ", "r"],
        ["さ", "t"],     ["し", "s"],     ["す", "c"],     ["せ", "g"],     ["そ", "m"],
        ["た", "e"],     ["ち", "u"],     ["つ", "o"],     ["て", "d"],     ["と", "j"],
        ["な", "Ld"],    ["に", "Ru"],    ["ぬ", "Rn"],    ["ね", ","],     ["の", "Rk"],
        ["は", "h"],     ["ひ", "x"],     ["ふ", "v"],     ["へ", "b"],     ["ほ", "."],
        ["ま", "Ro"],    ["み", "Rh"],    ["む", "R,"],    ["め", "n"],     ["も", "Lg"],
        ["や", "Lv"],    ["ゆ", "Rm"],    ["よ", "Ry"],
        ["ら", "y"],     ["り", "Le"],    ["る", "Ri"],    ["れ", "Lt"],    ["ろ", "Lc"],
        ["わ", "R."],    ["を", "La"],    ["ん", ";"],
        ["ゔ", "Ra"],
        ["が", "Rw"],    ["ぎ", "Lk"],    ["ぐ", "Li"],    ["げ", "Rf"],    ["ご", "Rr"],
        ["ざ", "Rt"],    ["じ", "Rs"],    ["ず", "Rc"],    ["ぜ", "Rg"],    ["ぞ", "Lm"],
        ["だ", "Re"],    ["ぢ", "Lu"],    ["づ", "Lo"],    ["で", "Rd"],    ["ど", "Lj"],
        ["ば", "Lh"],    ["び", "Rx"],    ["ぶ", "Rv"],    ["べ", "Rb"],    ["ぼ", "L."],
        ["ぱ", "Ly"],    ["ぴ", "Lp"],    ["ぷ", "Ln"],    ["ぺ", "L,"],    ["ぽ", "Ll"],
        ["ぁ", "Lq"],    ["ぃ", "Lb"],    ["ぅ", "Lz"],    ["ぇ", "Rp"],    ["ぉ", "R/"],
        ["ゃ", "Rr"],    ["ゅ", "Rf"],    ["ょ", "Ll"],
        ["っ", "R;"],
        ["「", "["],     ["」", "]"],
        ["、", "p"],     ["。", "z"],     ["ー", "Lx"]
      ]
    ],
    [   "M式 (標準モード)", [
        ["きゃ", "Shあ"], ["きぃ", "Shい"], ["きゅ", "Shう"], ["きぇ", "Shえ"], ["きょ", "Shお"],
        ["しゃ", "Sjあ"], ["しぃ", "Sjい"], ["しゅ", "Sjう"], ["しぇ", "Sjえ"], ["しょ", "Sjお"],
        ["ちゃ", "Skあ"], ["ちぃ", "Skい"], ["ちゅ", "Skう"], ["ちぇ", "Skえ"], ["ちょ", "Skお"],
        ["にゃ", "Slあ"], ["にぃ", "Slい"], ["にゅ", "Slう"], ["にぇ", "Slえ"], ["にょ", "Slお"],
        ["ひゃ", "S;あ"], ["ひぃ", "S;い"], ["ひゅ", "S;う"], ["ひぇ", "S;え"], ["ひょ", "S;お"],
        ["みゃ", "Syあ"], ["みぃ", "Syい"], ["みゅ", "Syう"], ["みぇ", "Syえ"], ["みょ", "Syお"],
        ["りゃ", "Siあ"], ["りぃ", "Siい"], ["りゅ", "Siう"], ["りぇ", "Siえ"], ["りょ", "Siお"],
        ["ぎゃ", "Snあ"], ["ぎぃ", "Snい"], ["ぎゅ", "Snう"], ["ぎぇ", "Snえ"], ["ぎょ", "Snお"],
        ["じゃ", "Smあ"], ["じぃ", "Smい"], ["じゅ", "Smう"], ["じぇ", "Smえ"], ["じょ", "Smお"],
        ["ぢゃ", "S,あ"], ["ぢぃ", "S,い"], ["ぢゅ", "S,う"], ["ぢぇ", "S,え"], ["ぢょ", "S,お"],
        ["びゃ", "S/あ"], ["びぃ", "S/い"], ["びゅ", "S/う"], ["びぇ", "S/え"], ["びょ", "S/お"],
        ["ぴゃ", "Spあ"], ["ぴぃ", "Spい"], ["ぴゅ", "Spう"], ["ぴぇ", "Spえ"], ["ぴょ", "Spお"],
        ["か", "hあ"],    ["き", "hい"],   ["く", "hう"],   ["け", "hえ"],   ["こ", "hお"],
        ["さ", "jあ"],    ["し", "jい"],   ["す", "jう"],   ["せ", "jえ"],   ["そ", "jお"],
        ["た", "kあ"],    ["ち", "kい"],   ["つ", "kう"],   ["て", "kえ"],   ["と", "kお"],
        ["な", "lあ"],    ["に", "lい"],   ["ぬ", "lう"],   ["ね", "lえ"],   ["の", "lお"],
        ["は", ";あ"],    ["ひ", ";い"],   ["ふ", ";う"],   ["へ", ";え"],   ["ほ", ";お"],
        ["ま", "yあ"],    ["み", "yい"],   ["む", "yう"],   ["め", "yえ"],   ["も", "yお"],
        ["や", "uあ"],    ["ゆ", "uう"],   ["よ", "uお"],
        ["ら", "iあ"],    ["り", "iい"],   ["る", "iう"],   ["れ", "iえ"],   ["ろ", "iお"],
        ["わ", "oあ"],    ["を", "oお"],
        ["ゔ", "cう"],
        ["が", "nあ"],    ["ぎ", "nい"],   ["ぐ", "nう"],   ["げ", "nえ"],   ["ご", "nお"],
        ["ざ", "mあ"],    ["じ", "mい"],   ["ず", "mう"],   ["ぜ", "mえ"],   ["ぞ", "mお"],
        ["だ", ",あ"],    ["ぢ", ",い"],   ["づ", ",う"],   ["で", ",え"],   ["ど", ",お"],
        ["ば", "/あ"],    ["び", "/い"],   ["ぶ", "/う"],   ["べ", "/え"],   ["ぼ", "/お"],
        ["ぱ", "pあ"],    ["ぴ", "pい"],   ["ぷ", "pう"],   ["ぺ", "pえ"],   ["ぽ", "pお"],
        ["あい", "v"],    ["おう", "b"],   ["えい", "z"],
        ["あhう", "Sr"],   ["いhう", "Se"],   ["うhう", "Sw"],  ["えhい", "Sq"],  ["おhう", "St"],
        ["あん", "Sf"],   ["いん", "Sd"],   ["うん", "Ss"],  ["えん", "Sa"],  ["おん", "Sg"],
        ["あkう", "Sf"],   ["いkう", "Sd"],   ["うkう", "Ss"],  ["えkう", "Sa"],  ["おkう", "Sg"],
        ["ん", "So"],
        ["あ", "f"],     ["い", "d"],     ["う", "s"],     ["え", "a"],     ["お", "g"],
        ["ぁ", "xf"],    ["ぃ", "xd"],    ["ぅ", "xs"],    ["ぇ", "xa"],    ["ぉ", "xg"],
        ["ゃ", "xuf"],   ["ゅ", "xus"],   ["ょ", "xug"],
        ["っ", "Su"],
        ["「", "["],     ["」", "]"],
        ["、", "."],     ["。", "S."],     ["ー", "-"]
      ]
    ],
    [ "新JIS配列 (X 6004)", [
        ["あ", "b"],     ["い", "k"],     ["う", "j"],     ["え", "Su|"],   ["お", "Sj|"],
        ["か", "s"],     ["き", ";"],     ["く", "h"],     ["け", "w"],     ["こ", "x"],
        ["さ", "v"],     ["し", "d"],     ["す", "z"],     ["せ", "e"],     ["そ", "q"],
        ["た", "f"],     ["ち", "-"],     ["つ", "y"],     ["て", "r"],     ["と", "f"],
        ["な", "'"],     ["に", "c"],     ["ぬ", "Sp|"],   ["ね", "Sv|"],   ["の", "i"],
        ["は", "a"],     ["ひ", "Sy|"],   ["ふ", "Sr|"],   ["へ", "Ss|"],   ["ほ", "Se|"],
        ["ま", "Sh|"],   ["み", "Si|"],   ["む", "Sn|"],   ["め", "St|"],   ["も", "Sk|"],
        ["や", "So|"],   ["ゆ", "S;|"],   ["よ", "Sg|"],
        ["ら", "Sd|"],   ["り", "p"],     ["る", "m"],     ["れ", "/"],     ["ろ", "Sm|"],
        ["わ", "Sl|"],   ["を", "o"],     ["ん", "u"],
        ["ゔ", "jl"],
        ["が", "sl"],    ["ぎ", ";l"],    ["ぐ", "hl"],    ["げ", "wl"],    ["ご", "xl"],
        ["ざ", "vl"],    ["じ", "dl"],    ["ず", "zl"],    ["ぜ", "el"],    ["ぞ", "ql"],
        ["だ", "fl"],    ["ぢ", "-l"],    ["づ", "yl"],    ["で", "rl"],    ["ど", "fl"],
        ["ば", "al"],    ["び", "Syl"],   ["ぶ", "Srl"],   ["べ", "Ssl"],   ["ぼ", "Sel"],
        ["ぱ", "aSw|"],  ["ぴ", "SySw|"], ["ぷ", "SrSw|"], ["ぺ", "SsSw|"], ["ぽ", "SeSw|"],
        ["ぁ", "Sq|"],   ["ぃ", "Sa|"],   ["ぅ", "Sz|"],   ["ぇ", "Sx|"],   ["ぉ", "Sc|"],
        ["ゃ", "Sb|"],   ["ゅ", "Sf|"],   ["ょ", "t"],
        ["っ", "n"],
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "."],     ["ー", "S.|"]
      ]
    ],
    [   "TRON", [
        ["あ", "o"],     ["い", "j"],     ["う", "k"],     ["え", "Ry:"],   ["お", "Rh:"],
        ["か", "d"],     ["き", "y"],     ["く", "i"],     ["け", "Ru:"],   ["こ", "e"],
        ["さ", "v"],     ["し", "l"],     ["す", "n"],     ["せ", "Lc|"],   ["そ", "Lw|"],
        ["た", "a"],     ["ち", "Rj:"],   ["つ", "m"],     ["て", "f"],     ["と", "s"],
        ["な", "b"],     ["に", "c"],     ["ぬ", "La|"],   ["ね", "Ls|"],   ["の", "u"],
        ["は", "r"],     ["ひ", "Lq|"],   ["ふ", "Lg|"],   ["へ", "Lb|"],   ["ほ", "Lt|"],
        ["ま", "z"],     ["み", "Rl:"],   ["む", "Ro:"],   ["め", "Ri:"],   ["も", "g"],
        ["や", "R;:"],   ["ゆ", "Lv|"],   ["よ", "Lf|"],
        ["ら", "q"],     ["り", "x"],     ["る", "w"],     ["れ", "p"],     ["ろ", "Rp:"],
        ["わ", "Rn:"],   ["を", "h"],     ["ん", ";"],
        ["ゔ", "Sk|"],
        ["が", "Rd:"],   ["ぎ", "Ly|"],   ["ぐ", "Li|"],   ["げ", "Lu|"],   ["ご", "Le|"],
        ["ざ", "Rv:"],   ["じ", "Ll|"],   ["ず", "Ln|"],   ["ぜ", "Rc:"],   ["ぞ", "Rw:"],
        ["だ", "Ra:"],   ["ぢ", "Lj|"],   ["づ", "Lm|"],   ["で", "Rf:"],   ["ど", "Rs:"],
        ["ば", "Rr:"],   ["び", "Rq:"],   ["ぶ", "Rg:"],   ["べ", "Rb:"],   ["ぼ", "Rt:"],
        ["ぱ", "rR.:"],  ["ぴ", "LqR.:"], ["ぷ", "LgR.:"], ["ぺ", "LbR.:"], ["ぽ", "LtR.:"],
        ["ぁ", "R,:"],   ["ぃ", "Rm:"],   ["ぅ", "R/:"],   ["ぇ", "Lz|"],   ["ぉ", "Lx|"],
        ["ゃ", "Lr|"],   ["ゅ", "Ld|"],   ["ょ", "t"],
        ["っ", "/"],
        ["ヵ", "Rz:"],   ["ヶ", "Rx:"],
        ["ゎ", "L/|"],
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "."],     ["ー", "Rk:"]
      ]
    ],
    [ "月配列 (2-263)", [
        ["あ", "kf"],    ["い", "i"],     ["う", "j"],     ["え", "du"],    ["お", "dj"],
        ["か", "s"],     ["き", ";"],     ["く", "h"],     ["け", "x"],     ["こ", "w"],
        ["さ", "b"],     ["し", "e"],     ["す", "z"],     ["せ", "kc"],    ["そ", "q"],
        ["た", "g"],     ["ち", "-"],     ["つ", "y"],     ["て", "r"],     ["と", "f"],
        ["な", "v"],     ["に", "c"],     ["ぬ", "dy"],    ["ね", "d,"],    ["の", "o"],
        ["は", "a"],     ["ひ", "kw"],    ["ふ", "kr"],    ["へ", "kx"],    ["ほ", "ke"],
        ["ま", "dh"],    ["み", "di"],    ["む", "dn"],    ["め", "kt"],    ["も", "dk"],
        ["や", "do"],    ["ゆ", "d;"],    ["よ", "kg"],
        ["ら", "kd"],    ["り", "p"],     ["る", "m"],     ["れ", "'"],     ["ろ", "dm"],
        ["わ", "dl"],    ["を", "ks"],    ["ん", "u"],
        ["が", "sl"],    ["ぎ", ";l"],    ["ぐ", "hl"],    ["げ", "xl"],    ["ご", "wl"],
        ["ざ", "bl"],    ["じ", "el"],    ["ず", "zl"],    ["ぜ", "kcl"],   ["ぞ", "ql"],
        ["だ", "gl"],    ["ぢ", "-l"],    ["づ", "yl"],    ["で", "rl"],    ["ど", "fl"],
        ["ば", "al"],    ["び", "kwl"],   ["ぶ", "krl"],   ["べ", "kxl"],   ["ぼ", "kel"],
        ["ぱ", "a/"],    ["ぴ", "kw/"],   ["ぷ", "kr/"],   ["ぺ", "kx/"],   ["ぽ", "ke/"],
        ["ぁ", "kq"],    ["ぃ", "ka"],    ["ぅ", "kz"],    ["ぇ", "dp"],    ["ぉ", "d/"],
        ["ゃ", "kb"],    ["ゅ", "kv"],    ["ょ", "t"],
        ["っ", "n"],
        ["「", "["],     ["」", "]"],
        ["、", ","],     ["。", "."],     ["ー", "d."]
      ]
    ],
    [ "<a href='https://twitter.com/shiki_okasaka/status/818226122244562944' target=_blank>New Stickney 8</a>", [
        ["つ", "q"],  ["と", "w"],    ["こ", "e"],    ["く", "r"],     ["け", "t"],   ["や", "y"],   ["ゆ", "u"],   ["よ", "i"],   ["な", "o"],   ["に", "p"],
        ["た", "a"],  ["は", "s"],    ["し", "d"],    ["か", "f"],     ["て", "g"],   ["ん", "h"],   ["う", "j"],   ["い", "k"],                  ["の", ";"],
        ["そ", "z"],  ["せ", "x"],    ["す", "c"],    ["き", "v"],     ["さ", "b"],   ["っ", "n"],   ["れ", "m"],   ["、", ","],   ["。", "."],   ["を", "/"],

        ["づ", "ql"], ["ど", "wl"],   ["ご", "el"],   ["ぐ", "rl"],    ["げ", "tl"],  ["ゃ", "yl"],  ["ゅ", "ul"],  ["ょ", "il"],
        ["だ", "al"], ["ば", "sl"],   ["じ", "dl"],   ["が", "fl"],    ["で", "gl"],                 ["ぅ", "jl"],  ["ぃ", "kl"],
        ["ぞ", "zl"], ["ぜ", "xl"],   ["ず", "cl"],   ["ぎ", "vl"],    ["ざ", "bl"],

                      ["ち", "Sw|"],  ["ぬ", "Se|"],  ["ね", "Sr|"],                  ["む", "Sy|"], ["め", "Su|"], ["お", "Si|"], ["ま", "So|"], ["み", "Sp|"],
                      ["ひ", "Ss|"],  ["ふ", "Sd|"],  ["へ", "Sf|"],   ["ほ", "Sg|"], ["わ", "Sh|"], ["る", "Sj|"], ["り", "Sk|"], ["あ", "Sl|"], ["も", "S;|"],
                                                                                      ["ろ", "Sn|"], ["ら", "Sm|"], ["え", "S,|"], ["ー", "S.|"],

                      ["ぢ", "Swl"],                                                                                ["ぉ", "Sil"],
                      ["ば", "Ssl"],  ["ぶ", "Sdl"],  ["べ", "Sfl"],   ["ぼ", "Sgl"],                                              ["ぁ", "Sll"],
                                                                                                                    ["ぇ", "S,l"],

                      ["ぱ", "sSa|"],
                      ["ぴ", "Ssa|"], ["ぷ", "Sda|"], ["ぺ", "Sfa|"],  ["ぽ", "Sga|"],
      ]
    ]
]

function evalLayout(element, index, array) {
    var text = document.getElementById('text').value.replace(/\s/g, '')

    var strokes = text
    element[1].forEach(function(element, index, array) {
        strokes = strokes.replace(new RegExp(element[0], 'g'), element[1])
    })
    strokes = strokes.replace(/:R/g, 'X')
    strokes = strokes.replace(/\|L/g, 'X')
    strokes = strokes.replace(/\|S/g, 'X')
    var m
    m = strokes.match(/X/g)
    var contCount = m ? m.length : 0
    strokes = strokes.replace(/[:\|X]/g, '')

    var lr = strokes.replace(/[SLR]/g, '')
    lr = lr.replace(/[12345qwertasdfgzxcvb\[\]]/g, 'L')
    lr = lr.replace(/[67890yuiop\-=hjkl;'\\nm,\.\/]/g, 'R')
    m = lr.match(/LR/g)
    var lrCount = m ? m.length : 0
    m = lr.match(/RL/g)
    var rlCount = m ? m.length : 0

    var sf = strokes.replace(/[SLR]/g, '')
    sf = sf.replace(/(.)\1+/g, '$1')
    sf = sf.replace(/[qaz\[\]]/g, 'A')
    sf = sf.replace(/[12wsx]/g, 'B')
    sf = sf.replace(/[3edc]/g, 'C')
    sf = sf.replace(/[45rfvtgb]/g, 'D')
    sf = sf.replace(/[67yhnujm]/g, 'E')
    sf = sf.replace(/[8ik,]/g, 'F')
    sf = sf.replace(/[90ol\.]/g, 'G')
    sf = sf.replace(/[p;\/\-'=\\]/g, 'H')
    var sfCount = 0
    var prev = ' '
    for (var i = 0; i < sf.length; ++i) {
        c = sf.charAt(i)
        if (c == prev)
            ++sfCount
        prev = c
    }

    var sr = strokes
    sr = sr.replace(/(.)\1+/g, '$1')
    sr = sr.replace(/[qwer]/g, 'A')
    sr = sr.replace(/[asdf]/g, 'B')
    sr = sr.replace(/[zxcv]/g, 'C')
    sr = sr.replace(/[uiop]/g, 'D')
    sr = sr.replace(/[jkl;]/g, 'E')
    sr = sr.replace(/[m,\.\/]/g, 'F')
    var srCount = 0
    var prev = ' '
    for (var i = 0; i < sr.length; ++i) {
        c = sr.charAt(i)
        if (c == prev)
            ++srCount
        prev = c
    }

    var inner = '<td>' + element[0] + '</td>'
    inner += '<td>' + strokes.length + '</td>'
    inner += '<td>' + ((Math.round(strokes.length / text.length * 100)) / 100) + '</td>'
    inner += '<td>' + (lrCount + rlCount) + ' (' + (Math.round((lrCount + rlCount) / lr.length * 1000) / 10) + '%)</td>'
    inner += '<td>' + contCount + '</td>'
    inner += '<td>' + sfCount + '</td>'
    inner += '<td>' + srCount + '</td>'

    var row = document.createElement("tr")
    row.innerHTML = inner
    document.getElementById('result').appendChild(row)
}

function retry() {
    var table = document.getElementById('result')
    while (2 <= table.rows.length) {
        var row = table.rows[table.rows.length - 1]
        row.parentNode.removeChild(row)
    }
    layouts.forEach(evalLayout)
}

layouts.forEach(evalLayout)
</script>
</body>
</html>
